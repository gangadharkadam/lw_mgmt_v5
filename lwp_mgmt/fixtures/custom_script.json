[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Salary Slip", 
  "modified": "2015-11-28 05:50:50.518931", 
  "name": "Salary Slip-Client", 
  "script": "frappe.ui.form.on(\"Salary Slip\", \"month\", function(frm,doc,dt,dn) {\n                console.log(typeof user_roles);\n                 if('Management' in user_roles){\n              console.log('true');\n          }\n\n    \n    frappe.call({\n        method:\"lwp_mgmt.config.lwp_calculate.auto_calculate_lwp\",\n        args:{\n            \"emp\":frm.doc.employee,\n            \"month\":frm.doc.month,\n            \"year\":frm.doc.fiscal_year,\n        },\n        callback: function(r) {\n          if (r.message!=false){  \n            console.log(\"trigger\")\n            console.log(r.message[0])\n            console.log(frm.doc.total_days_in_month)\n            cur_frm.set_value(\"leave_without_pay\", (frm.doc.total_days_in_month - r.message[0][0]));\n            cur_frm.set_value(\"days_absent\", (frm.doc.total_days_in_month - r.message[0][0]));\n            cur_frm.set_value(\"payment_days\", (frm.doc.total_days_in_month - frm.doc.leave_without_pay));\n            console.log(frm.doc.leave_without_pay)\n            console.log(frm.doc.days_absent)\n          }\n        }\n\n      });\n});\nfrappe.ui.form.on(\"Salary Slip\", \"employee\", function(frm,doc,dt,dn) {\n                console.log(typeof user_roles);\n                 if('Management' in user_roles){\n              console.log('true');\n          }\n    frappe.call({\n        method:\"lwp_mgmtconfig.lwp_calculate.auto_calculate_lwp\",\n        args:{\n            \"emp\":frm.doc.employee,\n            \"month\":frm.doc.month,\n            \"year\":frm.doc.fiscal_year,\n        },\n        callback: function(r) {\n          if (r.message!=false){  \n            console.log(\"trigger\")\n            console.log(r.message[0])\n            console.log(frm.doc.total_days_in_month)\n            cur_frm.set_value(\"leave_without_pay\", (frm.doc.total_days_in_month - r.message[0][0]));\n            cur_frm.set_value(\"days_absent\", frm.doc.leave_without_pay);\n            cur_frm.set_value(\"payment_days\", (frm.doc.total_days_in_month - frm.doc.leave_without_pay));\n            console.log(frm.doc.leave_without_pay)\n            console.log(frm.doc.days_absent)\n          }\n        }\n\n      });\n});", 
  "script_type": "Client"
 }
]